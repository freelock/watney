#!/bin/bash

set -e

# prepend the current node_modules bin dir to $PATH so that we can use jshint
PATH="`git rev-parse --show-toplevel`/node_modules/.bin:$PATH"

# create a copy of the index we're trying to commit
tmp_dir=`mktemp -d`
trap "rm -r \"$tmp_dir\"" EXIT
git checkout-index -a --prefix="$tmp_dir/"

# now run the lint checks
cd "$tmp_dir"
npm run lint
